@model core_23webc_gr6.Models.Product

<!-- CHNhu -->
<div class="single-product-area">
	<div class="zigzag-bottom"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-4">
				<div class="single-sidebar">
					<h2 class="sidebar-title">Search Products</h2>
					<form action="">
						<input type="text" placeholder="Search products...">
						<input type="submit" value="Search">
					</form>
				</div>

				<div class="single-sidebar">
					<h2 class="sidebar-title">Products</h2>
					<div class="thubmnail-recent">
						<img src="~/assets/user/img/product-thumb-1.jpg" class="recent-thumb" alt="">
						<h2><a href="">Sony Smart TV - 2015</a></h2>
						<div class="product-sidebar-price">
							<ins>$700.00</ins> <del>$100.00</del>
						</div>
					</div>
					<div class="thubmnail-recent">
						<img src="~/assets/user/img/product-thumb-1.jpg" class="recent-thumb" alt="">
						<h2><a href="">Sony Smart TV - 2015</a></h2>
						<div class="product-sidebar-price">
							<ins>$700.00</ins> <del>$100.00</del>
						</div>
					</div>
					<div class="thubmnail-recent">
						<img src="~/assets/user/img/product-thumb-1.jpg" class="recent-thumb" alt="">
						<h2><a href="">Sony Smart TV - 2015</a></h2>
						<div class="product-sidebar-price">
							<ins>$700.00</ins> <del>$100.00</del>
						</div>
					</div>
					<div class="thubmnail-recent">
						<img src="~/assets/user/img/product-thumb-1.jpg" class="recent-thumb" alt="">
						<h2><a href="">Sony Smart TV - 2015</a></h2>
						<div class="product-sidebar-price">
							<ins>$700.00</ins> <del>$100.00</del>
						</div>
					</div>
				</div>

				<div class="single-sidebar">
					<h2 class="sidebar-title">Recent Posts</h2>
					<ul>
						<li><a href="">Sony Smart TV - 2015</a></li>
						<li><a href="">Sony Smart TV - 2015</a></li>
						<li><a href="">Sony Smart TV - 2015</a></li>
						<li><a href="">Sony Smart TV - 2015</a></li>
						<li><a href="">Sony Smart TV - 2015</a></li>
					</ul>
				</div>
			</div>

			<div class="col-md-8">
				<div class="product-content-right">
					<!--PNSon 10/10/2025 lấy category , name theo id đã chọn-->
					<div class="product-breadcroumb">
						<a href="">Home</a>
						<a href="">@Html.Raw(string.IsNullOrEmpty(Model.categoryName)? "<span>Chưa phân loại</span>":
														$"{Model.categoryName}")</a>
						<a href="">@Model.productName</a>
					</div>
					<!--endPNSon-->

					<div class="row">
						<div class="col-sm-6">
							<div class="product-images">
								<div class="product-main-img">
									<img src="~/img/Products/@Model.image" alt="@Model.productName" />
								</div>

								<div class="product-gallery">
									<img src="~/img/Products/@(Model.image)" alt="">
									<img src="~/img/Products/@(Model.image)" alt="">
									<img src="~/img/Products/@(Model.image)" alt="">
								</div>
							</div>
						</div>

						<div class="col-sm-6">
							<div class="product-inner">
								<!--PNSon 8/10/2025 load Name và Price-->
								<h2 class="product-name">@Model.productName</h2>
								<div class="product-inner-price">
									@if (Model.discountPercentage > 0 && Model.discountPercentage <= 100)
									{
										var newPrice = Model.price - (Model.price * Model.discountPercentage / 100);
										<ins>@newPrice.ToString("N0") VNĐ</ins>
										<del>@Model.price.ToString("N0") VNĐ</del>
									}
									else
									{
										<ins>@Model.price.ToString("N0") VNĐ</ins>
									}
								</div>
								<!--endPNSon-->

								<form action="" class="cart">
									<div class="quantity">
										<input type="number" size="4" class="input-text qty text" title="Qty" value="1"
											name="quantity" min="1" step="1">
									</div>
									<button class="add_to_cart_button" type="submit">Add to cart</button>
								</form>

								<!--PNSon 10/10/2025 lấy caregory với tag-->
								<div class="product-inner-category">
									<p>
										Category: @Html.Raw(string.IsNullOrEmpty(Model.categoryName)
																				? "<span>Chưa phân loại</span>"
																				: $"<a href='#'>{Model.categoryName}</a>")
										Tags: @Html.Raw((Model.Tag != null && Model.Tag.Any())
																				? string.Join(", ", Model.Tag.Select(t => $"<a href='#'>{t}</a>"))
																				: "<span>Không có tag</span>")
									</p>
								</div>
								<!--endPNSon-->


								<div role="tabpanel">
									<ul class="product-tab" role="tablist">
										<li role="presentation" class="active"><a href="#home" aria-controls="home"
												role="tab" data-toggle="tab">Description</a></li>
										<li role="presentation"><a href="#profile" aria-controls="profile" role="tab"
												data-toggle="tab">Reviews</a></li>
									</ul>
									<div class="tab-content">
										<div role="tabpanel" class="tab-pane fade in active" id="home">
											<h2>Product description</h2>
											<p>@Model.description</p>
										</div>
										<div role="tabpanel" class="tab-pane fade" id="profile">
											<h2>Reviews</h2>
											<div class="submit-review">
												<p><label for="name">Name</label> <input name="name" type="text"></p>
												<p><label for="email">Email</label> <input name="email" type="email">
												</p>
												<div class="rating-chooser">
													<p>Your rating</p>

													<div class="rating-wrap-post">
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
														<i class="fa fa-star"></i>
													</div>
												</div>
												<p><label for="review">Your review</label> <textarea name="review" id=""
														cols="30" rows="10"></textarea></p>
												<p><input type="submit" value="Submit"></p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="related-products-wrapper">
						<h2 class="related-products-title">Related Products</h2>
						<div class="related-products-carousel">
							<!--PNSon 11/10/2025 đã thêm phương thức lấy sản phẩm liên quan theo Tag-->
							@if (ViewBag.RelatedProducts != null &&
														((List<core_23webc_gr6.Models.Product>)ViewBag.RelatedProducts).Any())
							{
								foreach (var relatedProduct in
								(List<core_23webc_gr6.Models.Product>)ViewBag.RelatedProducts)
								{
									<div class="single-product">
										<div class="product-f-image">
											<img class="product-img" src="~/img/Products/@relatedProduct.image"
												alt="@relatedProduct.productName" />
											<div class="product-hover">
												<a href="#" class="add-to-cart-link"><i class="fa fa-shopping-cart"></i> Add to
													cart</a>
												<a href="@Url.Action("Details", "Product", new { id = relatedProduct.productId })"
													class="view-details-link">
													<i class="fa fa-link"></i> See details
												</a>
											</div>
										</div>
										<h2>
											<a asp-controller="Product" asp-action="Details"
												asp-route-id="@relatedProduct.productId">@relatedProduct.productName</a>
										</h2>
										<div class="product-carousel-price">
											@if (relatedProduct.discountPercentage > 0 && relatedProduct.discountPercentage <=
																				100)
											{
												var newPrice = relatedProduct.price - (relatedProduct.price *
												relatedProduct.discountPercentage / 100);
												<ins>@newPrice.ToString("N0") VNĐ</ins>
												<del>@relatedProduct.price.ToString("N0") VNĐ</del>
											}
											else
											{
												<ins>@relatedProduct.price.ToString("N0") VNĐ</ins>
											}
										</div>
									</div>
								}
							}
							else
							{
								<p>Không có sản phẩm liên quan.</p>
							}
							<!--endPNSon -->
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	.product-img {
		width: 220px;
		height: 280px;
		object-fit: contain;
	}
</style>
<!-- endCHNhu -->